"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3520],{3520:(ae,A,s)=>{s.r(A),s.d(A,{EvaluacionesPage:()=>te});var d=s(5861),c=s(2879),C=s(7155),E=s(6895),U=s(8423),_=(()=>{return(a=_||(_={}))[a.T1=1]="T1",a[a.T2=2]="T2",a[a.T3=3]="T3",a[a.T4=4]="T4",a[a.T5=5]="T5",a[a.T6=6]="T6",a[a.T7=7]="T7",a[a.T8=8]="T8",_;var a})(),p=s(4006),e=s(4650),v=s(6431),m=s(3905),g=s(7489),h=s(2523),x=s(1460);let F=(()=>{class a extends x.E{execute(t,n,o,i){var l=this;return(0,d.Z)(function*(){try{let u;return t===_.T1&&(u=yield l._calificarEvalT1(o,n)),[2,3,4,5,6,7,8].indexOf(t)>=0&&(u=yield l._califiEvalT2OrT3(o,i,n,t)),v.HT.right((0,g.cloneDeep)(u))}catch{return v.HT.left(!1)}})()}_calificarEvalT1(t,n){const o=t.map(i=>({eva_id:n.id,cond_id:i.grupo.id,aspva_id:i.id,tv_visual:i.inspeccionVisual,tv_documental:i.revisionDocumental,tv_entrevista:i.entrevistaActores,val_cond:i.valoracionCondicion,observacion:i.observaciones}));return(0,m.z)(this._http.post(`${h.b.V1.EVALUACIONES}/t1/calificar`,o))}_califiEvalT2OrT3(t,n,o,i){const l=t.map(u=>({eva_id:o.id,aspva_id:u.id,nivel_acuerdo:u.gradoAcuerdo}));return(0,m.z)(this._http.post(`${h.b.V1.EVALUACIONES}/t${i}/calificar`,[l,n]))}}return a.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(a)))(n||a)}}(),a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var b=s(4004);const Z=(a,r)=>{switch(a){case 1:switch(r){case"av":return!1;case"rd":case"era":return!0}case 2:switch(r){case"av":return!1;case"rd":case"era":return!0}case 3:switch(r){case"av":case"rd":return!0;case"era":return!1}case 4:switch(r){case"av":case"rd":case"era":return!0}case 5:switch(r){case"av":return!1;case"rd":case"era":return!0}case 6:switch(r){case"av":case"rd":case"era":return!0}case 7:switch(r){case"av":case"rd":return!0;case"era":return!1}case 8:switch(r){case"av":case"rd":case"era":return!0}case 9:switch(r){case"av":case"rd":case"era":return!0}case 10:switch(r){case"av":return!1;case"rd":case"era":return!0}case 11:switch(r){case"av":return!1;case"rd":case"era":return!0}case 12:switch(r){case"av":case"rd":case"era":return!0}case 13:switch(r){case"av":return!1;case"rd":case"era":return!0}case 14:switch(r){case"av":return!1;case"rd":case"era":return!0}case 15:switch(r){case"av":case"era":return!0;case"rd":return!1}case 16:switch(r){case"av":return!1;case"rd":case"era":return!0}case 17:switch(r){case"av":return!1;case"rd":case"era":return!0}case 18:switch(r){case"av":return!1;case"rd":case"era":return!0}case 19:switch(r){case"av":return!1;case"rd":case"era":return!0}case 20:switch(r){case"av":return!1;case"rd":case"era":return!0}case 21:switch(r){case"av":return!1;case"rd":case"era":return!0}case 22:switch(r){case"av":return!1;case"rd":case"era":return!0}case 23:switch(r){case"av":return!1;case"rd":case"era":return!0}case 24:switch(r){case"av":return!1;case"rd":case"era":return!0}case 25:switch(r){case"av":return!1;case"rd":case"era":return!0}case 26:switch(r){case"av":return!1;case"rd":case"era":return!0}case 27:switch(r){case"av":return!1;case"rd":case"era":return!0}case 28:switch(r){case"av":return!1;case"rd":case"era":return!0}case 29:switch(r){case"av":case"era":return!0;case"rd":return!1}case 30:switch(r){case"av":return!1;case"rd":case"era":return!0}case 31:switch(r){case"av":return!1;case"rd":case"era":return!0}}};let k=(()=>{class a extends x.E{execute(t){var n=this;return(0,d.Z)(function*(){try{let o;return t===_.T1&&(n._dataForEvaluacionTipo1?o=n._dataForEvaluacionTipo1:(o=yield n._getEvaTipo1(),n._dataForEvaluacionTipo1=o)),[_.T2].indexOf(t)>=0&&(n._dataForEvaluacionTipo2?o=n._dataForEvaluacionTipo2:(o=yield n._getEvaTipos(t),n._dataForEvaluacionTipo2=o)),[_.T3].indexOf(t)>=0&&(n._dataForEvaluacionTipo3?o=n._dataForEvaluacionTipo3:(o=yield n._getEvaTipos(t),n._dataForEvaluacionTipo3=o)),[_.T4].indexOf(t)>=0&&(n._dataForEvaluacionTipo4?o=n._dataForEvaluacionTipo4:(o=yield n._getEvaTipos(t),n._dataForEvaluacionTipo4=o)),[_.T5].indexOf(t)>=0&&(n._dataForEvaluacionTipo5?o=n._dataForEvaluacionTipo5:(o=yield n._getEvaTipos(t),n._dataForEvaluacionTipo5=o)),[_.T6].indexOf(t)>=0&&(n._dataForEvaluacionTipo6?o=n._dataForEvaluacionTipo6:(o=yield n._getEvaTipos(t),n._dataForEvaluacionTipo6=o)),[_.T7].indexOf(t)>=0&&(n._dataForEvaluacionTipo7?o=n._dataForEvaluacionTipo7:(o=yield n._getEvaTipos(t),n._dataForEvaluacionTipo7=o)),[_.T8].indexOf(t)>=0&&(n._dataForEvaluacionTipo8?o=n._dataForEvaluacionTipo8:(o=yield n._getEvaTipos(t),n._dataForEvaluacionTipo8=o)),v.HT.right((0,g.cloneDeep)(o))}catch{return v.HT.left(!1)}})()}_getEvaTipo1(){return(0,m.z)(this._http.get(`${h.b.V1.EVALUACIONES}/data/1`).pipe((0,b.U)(t=>this._mapEvaTipo1(t))))}_getEvaTipos(t){return(0,m.z)(this._http.get(`${h.b.V1.EVALUACIONES}/data/${t}`).pipe((0,b.U)(n=>this._mapEvaTipo2(n))))}_mapEvaTipo1(t){const n=[];let o=1;(0,g.orderBy)(t[0],"orden","asc").forEach(u=>{u.aspectos_evaluacion.forEach(T=>{n.push({id:T.id,orden:o,nombre:T.nombre,documental:T.documental,grupo:{id:u.id,orden:u.orden,descripcion:u.descripcion},inspeccionVisual:Z(o,"av"),revisionDocumental:Z(o,"rd"),entrevistaActores:Z(o,"era"),valoracionCondicion:null,observaciones:null}),o++})});const l={puntos:(0,g.orderBy)(n,"orden","asc"),puntosLibres:[]};return console.log(l),l}_mapEvaTipo2(t){const n=[];let o=1;return(0,g.orderBy)(t[0],"orden","asc").forEach(l=>{l.aspectos_evaluacion.forEach(u=>{n.push({id:u.id,orden:o,nombre:u.nombre,grupo:{id:l.id,orden:l.orden,descripcion:l.descripcion},gradoAcuerdo:5}),o++})}),{puntos:(0,g.orderBy)(n,"orden","asc"),puntosLibres:t[1]}}getRandom(t=1,n=4){return Math.round(Math.random()*(n-t)+t)}getRandomBoolean(t=0,n=1){const o=Math.random()*(n-t)+t;return!!Math.round(o)}}return a.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(a)))(n||a)}}(),a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),w=(()=>{class a extends x.E{execute(t=!0,n=!0){var o=this;return(0,d.Z)(function*(){try{const i=yield o._get(t,n);return v.HT.right((0,g.orderBy)(i,"created_at","desc"))}catch{return v.HT.left(!1)}})()}_get(t,n){return(0,m.z)(this._http.get(`${h.b.V1.EVALUACIONES}/all/${t?1:0}/${n?1:0}`).pipe((0,b.U)(o=>o.map(i=>this._map(i)))))}_map(t){return t.nombreTipoEvaluacion=t.tipo_evaluacion.nombre,t.nombreEntidad=t.entidad.nombre_completo,t.created_at=new Date(t.created_at),t.last_update=t.last_update?new Date(t.last_update):null,t}}return a.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(a)))(n||a)}}(),a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var N=s(2328);function J(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-buttons",2)(1,"ion-button",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filter.setValue(""))}),e._UZ(2,"ion-icon",10),e.qZA()()}}function y(a,r){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e._uU(3),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.entidad.nombre_completo," "),e.xp6(2),e.hij(" (",t.entidad.tipo.nombre,") ")}}function L(a,r){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e._uU(3),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.lnq(" ",t.maestro.nombre_completo," (",t.maestro.tipo.nombre,") EVALUADO POR ",t.entidad.nombre_completo," "),e.xp6(2),e.hij(" (",t.entidad.tipo.nombre,") ")}}const P=function(){return[5,6]};function D(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-card",11),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.clickOnToggleModal(!0,i))}),e.TgZ(1,"ion-card-header")(2,"ion-card-title"),e.YNc(3,y,4,2,"div",12),e.YNc(4,L,4,4,"div",12),e.TgZ(5,"span",13),e._uU(6),e.ALo(7,"formatDate"),e.qZA()(),e.TgZ(8,"ion-card-subtitle"),e._uU(9),e.ALo(10,"formatDate"),e.qZA()(),e.TgZ(11,"ion-card-content"),e._uU(12),e.qZA()()}if(2&a){const t=r.$implicit;e.xp6(3),e.Q6J("ngIf",e.DdM(11,P).indexOf(t.tipo_id)<0),e.xp6(1),e.Q6J("ngIf",e.DdM(12,P).indexOf(t.tipo_id)>=0),e.xp6(2),e.hij(" (",e.xi3(7,5,t.created_at,4),") "),e.xp6(3),e.hij(" ",t.last_update?"ACTUALIZADA EL "+e.xi3(10,8,t.last_update,4):"NO HA EMPEZADO ESTA EVALUACI\xd3N"," "),e.xp6(3),e.hij(" ",t.tipo_evaluacion.nombre," ")}}function I(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-buttons",20)(1,"ion-button",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.clickOnPregLibresToggleModal(!0))}),e._uU(2,"Preg. Libres"),e.qZA()()}}function Q(a,r){if(1&a&&(e.TgZ(0,"div",24)(1,"b"),e._uU(2,"DOCUMENTAL:"),e.qZA(),e._UZ(3,"br"),e._uU(4),e.qZA()),2&a){const t=e.oxw(3);e.xp6(4),e.hij("",t.pt1.documental," ")}}function S(a,r){if(1&a&&(e.TgZ(0,"div")(1,"div",21)(2,"b"),e._uU(3,"CONDICI\xd3N DE CALIDAD:"),e.qZA(),e._UZ(4,"br"),e._uU(5),e.qZA(),e.TgZ(6,"div",22)(7,"b"),e._uU(8,"ASPECTOS A EVALUAR DE LA CONDICI\xd3N: "),e.qZA(),e._UZ(9,"br"),e._uU(10),e.qZA(),e.YNc(11,Q,5,1,"div",23),e.qZA()),2&a){const t=e.oxw(2);e.xp6(5),e.AsE("",t.pt1.grupo.orden," - ",t.pt1.grupo.descripcion," "),e.xp6(5),e.hij("",t.pt1.nombre," "),e.xp6(1),e.Q6J("ngIf",t.pt1.documental)}}function q(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-content",18)(1,"ion-checkbox",25),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.pt1.inspeccionVisual=o)}),e._UZ(2,"ion-icon",26),e.TgZ(3,"span"),e._uU(4,"(inspecci\xf3n visual)"),e.qZA()(),e.TgZ(5,"ion-checkbox",25),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.pt1.revisionDocumental=o)}),e._UZ(6,"ion-icon",27),e.TgZ(7,"span"),e._uU(8,"(Revisi\xf3n documental)"),e.qZA()(),e.TgZ(9,"ion-checkbox",25),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.pt1.entrevistaActores=o)}),e._UZ(10,"ion-icon",28),e.TgZ(11,"span"),e._uU(12,"(Entrevista / reuni\xf3n con actores)"),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"ion-radio-group",29),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.pt1.valoracionCondicion=o)}),e.TgZ(15,"ion-radio",30),e._uU(16,"Cumple"),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"ion-radio",30),e._uU(19,"Cumple parcialmente"),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"ion-radio",30),e._uU(22,"No cumple"),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"ion-radio",30),e._uU(25,"No aplica"),e.qZA(),e._UZ(26,"br"),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"ion-item")(29,"ion-textarea",31),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.pt1.observaciones=o)}),e.qZA()()()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.pt1.inspeccionVisual)("ngModel",t.pt1.inspeccionVisual)("disabled",!0),e.xp6(4),e.Q6J("checked",t.pt1.revisionDocumental)("ngModel",t.pt1.revisionDocumental)("disabled",!0),e.xp6(4),e.Q6J("checked",t.pt1.entrevistaActores)("ngModel",t.pt1.entrevistaActores)("disabled",!0),e.xp6(5),e.Q6J("allowEmptySelection",!0)("ngModel",t.pt1.valoracionCondicion),e.xp6(1),e.Q6J("value",1),e.xp6(3),e.Q6J("value",2),e.xp6(3),e.Q6J("value",3),e.xp6(3),e.Q6J("value",4),e.xp6(5),e.Q6J("ngModel",t.pt1.observaciones)}}function G(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.clickOnAnteriorPregunta())}),e._uU(1," Anterior "),e.qZA()}}function V(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.clickOnNuevaPregunta())}),e._uU(1," Siguiente "),e.qZA()}if(2&a){const t=e.oxw(3);e.Q6J("disabled",!t.pt1.valoracionCondicion)}}function Y(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.clickOnFinalizar(1))}),e._uU(1," Finalizar "),e.qZA()}if(2&a){const t=e.oxw(3);e.Q6J("disabled",!t.pt1.valoracionCondicion)}}function H(a,r){if(1&a&&(e.TgZ(0,"ion-footer")(1,"ion-toolbar"),e.YNc(2,G,2,0,"ion-button",32),e.YNc(3,V,2,1,"ion-button",33),e.YNc(4,Y,2,1,"ion-button",34),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",0!==t.preguntaActual),e.xp6(1),e.Q6J("ngIf",t.preguntaActual<t.evaT1.length-1),e.xp6(1),e.Q6J("ngIf",t.preguntaActual===t.evaT1.length-1)}}function z(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-content",18)(1,"ion-radio-group",29),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.pt2.gradoAcuerdo=o)}),e.TgZ(2,"ion-radio",30),e._uU(3,"Totalmente de acuerdo"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"ion-radio",30),e._uU(6,"De acuerdo"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"ion-radio",30),e._uU(9,"Ni de Acuerdo ni en desacuerdo"),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"ion-radio",30),e._uU(12,"En desacuerdo"),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"ion-radio",30),e._uU(15,"Totalmente en desacuerdo"),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"ion-radio",30),e._uU(18,"No aplica"),e.qZA(),e._UZ(19,"br"),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("allowEmptySelection",!0)("ngModel",t.pt2.gradoAcuerdo),e.xp6(1),e.Q6J("value",5),e.xp6(3),e.Q6J("value",4),e.xp6(3),e.Q6J("value",3),e.xp6(3),e.Q6J("value",2),e.xp6(3),e.Q6J("value",1),e.xp6(3),e.Q6J("value",null)}}function K(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.clickOnAnteriorPregunta())}),e._uU(1," Anterior "),e.qZA()}}function $(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.clickOnNuevaPregunta())}),e._uU(1," Siguiente "),e.qZA()}if(2&a){const t=e.oxw(3);e.Q6J("disabled",void 0===t.pt2.gradoAcuerdo)}}function j(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.clickOnFinalizar(o.tipoEvaluacionActual))}),e._uU(1," Finalizar "),e.qZA()}if(2&a){const t=e.oxw(3);e.Q6J("disabled",!t.pt2.gradoAcuerdo)}}function B(a,r){if(1&a&&(e.TgZ(0,"ion-footer")(1,"ion-toolbar"),e.YNc(2,K,2,0,"ion-button",32),e.YNc(3,$,2,1,"ion-button",33),e.YNc(4,j,2,1,"ion-button",34),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",0!==t.preguntaActual),e.xp6(1),e.Q6J("ngIf",t.preguntaActual<t.evaT2.length-1),e.xp6(1),e.Q6J("ngIf",t.preguntaActual===t.evaT1.length-1)}}const R=function(){return[1,2,3,4,5,6,7,8]},M=function(){return[1]},O=function(){return[2,3,4,5,6,7,8]};function X(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar"),e.YNc(2,I,3,0,"ion-buttons",14),e.TgZ(3,"ion-title"),e._uU(4),e.qZA(),e.TgZ(5,"ion-buttons",2)(6,"ion-button",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clickOnToggleModal(!1))}),e._uU(7,"Cerrar"),e.qZA()()()(),e.TgZ(8,"div",15)(9,"span",16),e._uU(10),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"span",17),e._uU(13),e.qZA()(),e.TgZ(14,"ion-content",18),e.YNc(15,S,12,4,"div",12),e.qZA(),e.YNc(16,q,30,16,"ion-content",19),e.YNc(17,H,5,3,"ion-footer",12),e.YNc(18,z,20,8,"ion-content",19),e.YNc(19,B,5,3,"ion-footer",12)}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",1!==t.tipoEvaluacionActual),e.xp6(2),e.AsE("",t.preguntaActual+1," de ",t.evaT1.length,""),e.xp6(6),e.hij(" ",null==t.evaluacionSelected||null==t.evaluacionSelected.tipo_evaluacion?null:t.evaluacionSelected.tipo_evaluacion.nombre," "),e.xp6(3),e.hij(" ",null==t.evaluacionSelected||null==t.evaluacionSelected.tipo_evaluacion?null:t.evaluacionSelected.tipo_evaluacion.descripcion," "),e.xp6(1),e.Akn("max-height: "+(1===t.tipoEvaluacionActual?150:250)+"px"),e.xp6(1),e.Q6J("ngIf",e.DdM(12,R).indexOf(t.tipoEvaluacionActual)>=0),e.xp6(1),e.Q6J("ngIf",e.DdM(13,M).indexOf(t.tipoEvaluacionActual)>=0),e.xp6(1),e.Q6J("ngIf",e.DdM(14,M).indexOf(t.tipoEvaluacionActual)>=0),e.xp6(1),e.Q6J("ngIf",e.DdM(15,O).indexOf(t.tipoEvaluacionActual)>=0),e.xp6(1),e.Q6J("ngIf",e.DdM(16,O).indexOf(t.tipoEvaluacionActual)>=0)}}function W(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"ion-item")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-item")(5,"ion-textarea",39),e.NdJ("ngModelChange",function(o){const l=e.CHM(t).$implicit;return e.KtG(l.respuesta=o)}),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(3),e.Oqu(t.pregunta),e.xp6(2),e.Q6J("ngModel",t.respuesta)}}function ee(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Preguntas Libres"),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-button",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clickOnPregLibresToggleModal(!1))}),e._uU(6,"Listo"),e.qZA()()()(),e.TgZ(7,"ion-content",18),e.YNc(8,W,6,2,"div",38),e.qZA(),e._UZ(9,"ion-footer")}if(2&a){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.dataForPreguntasLibres)}}let te=(()=>{class a{constructor(t,n,o,i,l,u){this._getDataForGenerateEvaluacion=t,this._getEvaluacionesPendientes=n,this._calificarEvaluacion=o,this._alertController=i,this._loadingCtrl=l,this._cd=u,this.dataSource=new C.by([]),this.isModalOpen=!1,this.isModalPrLibresOpen=!1,this._preguntaActual=0,this._tipoEvaluacionActual=_.T1,this.filter=new p.NI(""),this._subs1=this.filter.valueChanges.subscribe(f=>{this.dataSource.filter=(f||"").trim().toLowerCase()})}ngOnInit(){var t=this;return(0,d.Z)(function*(){yield t._fetchEvaluacionesPendientes()})()}refresh(){this._fetchEvaluacionesPendientes()}clickOnPregLibresToggleModal(t){this.isModalPrLibresOpen=!!t}clickOnToggleModal(t,n){var o=this;return(0,d.Z)(function*(){n&&(yield o._showLoading("Obteniendo informaci\xf3n para generar evaluaci\xf3n..."),o.evaluacionSelected=n,o._tipoEvaluacionActual=n.tipo_evaluacion.id,(yield o._getDataForGenerateEvaluacion.execute(n.tipo_id)).fold({right:l=>{o._dataForTipoEvaluacion=l.puntos,o.dataForPreguntasLibres=l.puntosLibres,o._removeLoading()}})),t?o.isModalOpen=!0:(o.isModalOpen=!1,o._preguntaActual=0),o._cd.markForCheck()})()}_fetchEvaluacionesPendientes(){var t=this;return(0,d.Z)(function*(){yield t._showLoading(),(yield t._getEvaluacionesPendientes.execute()).fold({right:o=>{t._instanceDataSource(o)}}),t._removeLoading()})()}_instanceDataSource(t){this.dataSource=new C.by(t),this._cd.markForCheck()}_showLoading(t="Obteniendo evaluaciones pendientes..."){var n=this;return(0,d.Z)(function*(){n._loading=yield n._loadingCtrl.create({message:t}),n._loading.present()})()}_removeLoading(){this._loading.remove()}get preguntaActual(){return this._preguntaActual}get tipoEvaluacionActual(){return this._tipoEvaluacionActual}clickOnNuevaPregunta(){this._preguntaActual++}clickOnAnteriorPregunta(){this._preguntaActual--}clickOnFinalizar(t){var n=this;return(0,d.Z)(function*(){var i;yield(yield n._alertController.create({header:"Cerrar sesi\xf3n",message:"\xbfEst\xe1 segur@ que desea cerrar la sesi\xf3n?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"OK",role:"confirm",handler:(i=(0,d.Z)(function*(){n._loading=yield n._loadingCtrl.create({message:"Calificando evaluaci\xf3n, por favor espere"}),n._loading.present(),n._cd.markForCheck();const l=1!==t?n.dataForPreguntasLibres.map(T=>({eva_id:n.evaluacionSelected.id,preg_libre_id:T.id,respuesta:T.respuesta||null})):void 0;n.clickOnToggleModal(!1);const u=yield n._calificarEvaluacion.execute(t,n.evaluacionSelected,n._dataForTipoEvaluacion,l);n._loading.remove(),n._cd.markForCheck();let f="";u.fold({right:()=>{f="Evaluaci\xf3n calificada exitosamente"},left:()=>{f="La evaluaci\xf3n no ha podido ser calificada, intentelo nuevamente"}}),yield(yield n._alertController.create({header:"Estado de la evaluaci\xf3n",message:f,buttons:["OK"]})).present(),n.clickOnToggleModal(!1),yield n._fetchEvaluacionesPendientes()}),function(){return i.apply(this,arguments)})}]})).present()})()}get pt1(){return this._dataForTipoEvaluacion[this._preguntaActual]}get evaT1(){return this._dataForTipoEvaluacion}get pt2(){return this._dataForTipoEvaluacion[this._preguntaActual]}get evaT2(){return this._dataForTipoEvaluacion}ngOnDestroy(){this._subs1.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(k),e.Y36(w),e.Y36(F),e.Y36(c.Br),e.Y36(c.HT),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-evaluaciones"]],standalone:!0,features:[e.jDz],decls:18,vars:8,consts:[[1,"tab-container","ion-padding"],[1,"tab-content"],["slot","end"],[3,"click"],["name","refresh-outline"],["labelPlacement","floating","label","Buscar",3,"formControl"],["slot","end",4,"ngIf"],["class","tab-card",3,"click",4,"ngFor","ngForOf"],[3,"isOpen","backdropDismiss"],["color","dark",3,"click"],["name","close-outline"],[1,"tab-card",3,"click"],[4,"ngIf"],[1,"card-sub-in-title"],["slot","start",4,"ngIf"],[1,"ion-padding",2,"padding-bottom","0px"],[1,"ion-title"],[1,"ion-subtitle"],[1,"ion-padding"],["class","ion-padding",4,"ngIf"],["slot","start"],[1,"eva1-grupo"],[1,"eva1-nombre"],["class","eva1-documental",4,"ngIf"],[1,"eva1-documental"],["labelPlacement","end",3,"checked","ngModel","disabled","ngModelChange"],["name","eye-outline"],["name","document-text-outline"],["name","people-outline"],["value","valoracion",3,"allowEmptySelection","ngModel","ngModelChange"],[3,"value"],["labelPlacement","floating","fill","outline","placeholder","Observaciones (opcional)",3,"ngModel","ngModelChange"],["slot","start",3,"click",4,"ngIf"],["slot","end",3,"disabled","click",4,"ngIf"],["slot","end","color","success",3,"disabled","click",4,"ngIf"],["slot","start",3,"click"],["slot","end",3,"disabled","click"],["slot","end","color","success",3,"disabled","click"],[4,"ngFor","ngForOf"],["labelPlacement","floating","fill","outline","placeholder","Respuesta (opcional)",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"ion-toolbar")(3,"ion-label")(4,"b"),e._uU(5),e.qZA()(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e.NdJ("click",function(){return n.refresh()}),e._UZ(8,"ion-icon",4),e.qZA()()(),e.TgZ(9,"ion-item"),e._UZ(10,"ion-input",5),e.YNc(11,J,3,0,"ion-buttons",6),e.qZA()()(),e.TgZ(12,"ion-content"),e.YNc(13,D,13,13,"ion-card",7),e.qZA(),e.TgZ(14,"ion-modal",8),e.YNc(15,X,20,17,"ng-template"),e.qZA(),e.TgZ(16,"ion-modal",8),e.YNc(17,ee,10,1,"ng-template"),e.qZA()),2&t&&(e.xp6(5),e.hij("",n.dataSource.data.length," EVALUACIONES PENDIENTES"),e.xp6(5),e.Q6J("formControl",n.filter),e.xp6(1),e.Q6J("ngIf",n.filter.value),e.xp6(2),e.Q6J("ngForOf",n.dataSource.filteredData),e.xp6(1),e.Q6J("isOpen",n.isModalOpen)("backdropDismiss",!1),e.xp6(2),e.Q6J("isOpen",n.isModalPrLibresOpen)("backdropDismiss",!1))},dependencies:[E.ez,E.sg,E.O5,c.Pc,c.YG,c.Sm,c.PM,c.FN,c.Zi,c.tO,c.Dq,c.nz,c.W2,c.fr,c.Gu,c.gu,c.pK,c.Ie,c.Q$,c.B7,c.se,c.g2,c.wd,c.sr,c.ki,c.w,c.U5,c.QI,c.j9,p.u5,p.JJ,p.On,p.UX,p.oH,U.D,N.i],styles:[".card-sub-in-title[_ngcontent-%COMP%]{font-size:10px;color:#666}.ion-title[_ngcontent-%COMP%]{font-weight:bolder;font-size:14px}.ion-subtitle[_ngcontent-%COMP%]{color:gray;font-size:12px;font-weight:600}.eva1-nombre[_ngcontent-%COMP%], .eva1-documental[_ngcontent-%COMP%]{margin-top:10px}ion-checkbox[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-left:10px;margin-top:3px;float:right}ion-checkbox[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-left:10px}"],changeDetection:0}),a})()}}]);