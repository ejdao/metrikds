"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6735],{6735:(W,U,o)=>{o.r(U),o.d(U,{LoginPageModule:()=>k});var x=o(6895),F=o(1390),L=o(5861),C=o(2523),u=o(4006),y=o(3200);class I extends u.cw{constructor(){super({username:new u.NI(null,[y.C1]),password:new u.NI(null,[y.C1])})}get username(){return this.get("username")}get password(){return this.get("password")}get model(){return{email:this.username.value,password:this.password.value}}}var n=o(4650);class P{constructor(r){this._auth=r}execute(r){return this._auth.execute(r)}}var J=o(3905),Z=o(4986),N=o(1165),T=o(4482),S=o(8421),w=o(3888),A=o(5403),z=o(9672);const E=(0,w.d)(t=>function(e=null){t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e});function Y(t){throw new E(t)}var M=o(2843),Q=o(4671),B=o(2805),O=o(529);let R=(()=>{class t{constructor(e){this._http=e}execute(e){var i=this;return(0,L.Z)(function*(){return(0,J.z)(i._http.post(C.b.V1.AUTH.LOGIN,e).pipe(function G(t,r){const{first:e,each:i,with:l=Y,scheduler:c=(null!=r?r:Z.z),meta:g=null}=(0,N.q)(t)?{first:t}:"number"==typeof t?{each:t}:t;if(null==e&&null==i)throw new TypeError("No timeout provided.");return(0,T.e)((v,a)=>{let h,s,d=null,m=0;const b=p=>{s=(0,z.f)(a,c,()=>{try{h.unsubscribe(),(0,S.Xf)(l({meta:g,lastValue:d,seen:m})).subscribe(a)}catch(K){a.error(K)}},p)};h=v.subscribe((0,A.x)(a,p=>{null==s||s.unsubscribe(),m++,a.next(d=p),i>0&&b(i)},void 0,void 0,()=>{null!=s&&s.closed||null==s||s.unsubscribe(),d=null})),!m&&b(null!=e?"number"==typeof e?e:+e-c.now():i)})}({each:4e3,with:()=>(0,M._)(()=>{})}),function H(t=1/0){let r;r=t&&"object"==typeof t?t:{count:t};const{count:e=1/0,delay:i,resetOnSuccess:l=!1}=r;return e<=0?Q.y:(0,T.e)((c,g)=>{let a,v=0;const h=()=>{let s=!1;a=c.subscribe((0,A.x)(g,d=>{l&&(v=0),g.next(d)},void 0,d=>{if(v++<e){const m=()=>{a?(a.unsubscribe(),a=null,h()):s=!0};if(null!=i){const b="number"==typeof i?(0,B.H)(i):(0,S.Xf)(i(d,v)),p=(0,A.x)(g,()=>{p.unsubscribe(),m()},()=>{g.complete()});b.subscribe(p)}else m()}else g.error(d)})),s&&(a.unsubscribe(),a=null,h())};h()})}(3)))})()}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(O.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),j=(()=>{class t{constructor(e){this._loginUser=e}execute(e){var i=this;return(0,L.Z)(function*(){const l=new P(i._loginUser);try{const c=yield l.execute(e);return y.HT.right(c)}catch{return y.HT.left(!1)}})()}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(R))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var X=o(5456),f=o(2879);const D=[{path:"",component:(()=>{class t{constructor(e,i,l,c){this._auth=e,this._router=i,this._toast=l,this._cd=c,this.loginForm=new I,this._isAuthenticating=!1}clickOnAuthenticate(){var e=this;return(0,L.Z)(function*(){e.loginForm.valid&&(e._isAuthenticating=!0,e._cd.markForCheck(),(yield e._auth.execute(e.loginForm.model)).fold({right:l=>{l.token.includes("Invalid credentials")?e._toast.simpleNotification("Usuario y/o contrase\xf1a incorrectas"):(localStorage.setItem(C.I.authToken,l.token),e._router.navigate(["home/personas"]))}}),e._isAuthenticating=!1,e._cd.markForCheck())})()}get isAuthenticating(){return this._isAuthenticating}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(j),n.Y36(F.F0),n.Y36(X.a),n.Y36(n.sBO))},t.\u0275cmp=n.Xpm({type:t,selectors:[["gcm-login"]],decls:15,vars:6,consts:[[3,"translucent"],[1,"background-image",3,"fullscreen"],["collapse","condense"],[1,"background-image"],["size","large"],[3,"formGroup","ngSubmit"],["label","Nombre del Usuario",3,"formControl"],["type","password","label","Contrase\xf1a",3,"formControl"],["type","submit",1,"bolder",3,"disabled"]],template:function(e,i){1&e&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Control de acceso"),n.qZA()()(),n.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar",3)(7,"ion-title",4),n._uU(8,"Control de acceso"),n.qZA()()(),n.TgZ(9,"form",5),n.NdJ("ngSubmit",function(){return i.clickOnAuthenticate()}),n._UZ(10,"ion-input",6)(11,"ion-input",7)(12,"br"),n.TgZ(13,"ion-button",8),n._uU(14," INICIAR SESI\xd3N "),n.qZA()()()),2&e&&(n.Q6J("translucent",!0),n.xp6(4),n.Q6J("fullscreen",!0),n.xp6(5),n.Q6J("formGroup",i.loginForm),n.xp6(1),n.Q6J("formControl",i.loginForm.username),n.xp6(1),n.Q6J("formControl",i.loginForm.password),n.xp6(2),n.Q6J("disabled",i.isAuthenticating))},dependencies:[u._Y,u.JJ,u.JL,u.oH,u.sg,f.YG,f.W2,f.Gu,f.pK,f.wd,f.sr,f.j9],styles:[".background-image[_ngcontent-%COMP%]{--background: #abbaab;--background: -webkit-linear-gradient(to right, #ffffff, #abbaab);--background: linear-gradient(to right, #ffffff, #abbaab)}form[_ngcontent-%COMP%]{padding:10px;text-align:center}"],changeDetection:0}),t})()}];let V=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[F.Bz.forChild(D),F.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[x.ez,u.UX,V,f.Pc]}),t})()}}]);