"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4830],{6504:(P,l,o)=>{o.d(l,{S:()=>C});class C{}},998:(P,l,o)=>{o.d(l,{F:()=>C});class C{}},4830:(P,l,o)=>{o.r(l),o.d(l,{GestionClinicaModule:()=>x});var C=o(7518),S=o(9585),G=o(579),c=o(4650);const h=[{path:"",children:[{path:"administrar-gestiones",loadChildren:()=>Promise.all([o.e(7155),o.e(8592),o.e(7028)]).then(o.bind(o,7028)).then(e=>e.AdministrarGestionesModule),data:{title:"Administrar gestiones",authorities:[S.R.ADMINISTRADOR,G.a.ADMINISTRAR_GESTIONES]}}]}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[C.Bz.forChild(h),C.Bz]}),e})();var m=o(2216),I=o(7283),O=o(5861),T=o(7810),d=o(1135),p=o(3905),g=o(4004),M=o(8505),D=(()=>{return(e=D||(D={}))[e.ASIGNADA=1]="ASIGNADA",e[e.EN_PROCESO=2]="EN_PROCESO",e[e.CERRADA=3]="CERRADA",D;var e})(),_=(()=>{return(e=_||(_={})).ASIGNADA="ASIGNADA",e.EN_PROCESO="EN PROCESO",e.CERRADA="CERRADA",_;var e})();const L=e=>{switch(e){case D.ASIGNADA:return _.ASIGNADA;case D.EN_PROCESO:return _.EN_PROCESO;case D.CERRADA:return _.CERRADA}};var E=(()=>{return(e=E||(E={}))[e.BAJA=1]="BAJA",e[e.MEDIA=2]="MEDIA",e[e.ALTA=3]="ALTA",e[e.CRITICA=4]="CRITICA",E;var e})(),R=(()=>{return(e=R||(R={})).BAJA="BAJA",e.MEDIA="MEDIA",e.ALTA="ALTA",e.CRITICA="CRITICA",R;var e})();class F{constructor(s,t,n,a,u,N,K,W,Q,j,U,Y,w,k,q,ee,te){this._id=s,this._centroId=t,this._titulo=n,this._contenido=a,this._prioridad=u,this._estado=N,this._creadaPor=K,this._procesadaPor=W,this._cerradaPor=Q,this._paciente=j,this._ingreso=U,this._tipo=Y,this._creadoDesde=w,this._enProcesoDesde=k,this._cerradaDesde=q,this._fueActualizada=ee,this._tipoForHumans=te,this._codigo=`GC${s}`,this._prioridadCssClass=(e=>{switch(e){case E.BAJA:return"low";case E.MEDIA:return"medium";case E.ALTA:return"high";case E.CRITICA:return"critical"}})(u),this._prioridadForHumans=(e=>{switch(e){case E.BAJA:return R.BAJA;case E.MEDIA:return R.MEDIA;case E.ALTA:return R.ALTA;case E.CRITICA:return R.CRITICA}})(u),this._estadoForHumans=L(N),this._consecutivo=U.consecutivo}get id(){return this._id}get centroId(){return this._centroId}get codigo(){return this._codigo}get titulo(){return this._titulo}get contenido(){return this._contenido}get prioridad(){return this._prioridad}get prioridadCssClass(){return this._prioridadCssClass}get prioridadForHumans(){return this._prioridadForHumans}get estado(){return this._estado}get estadoForHumans(){return this._estadoForHumans}get creadaPor(){return this._creadaPor}get procesadaPor(){return this._procesadaPor}get cerradaPor(){return this._cerradaPor}get paciente(){return this._paciente}get ingreso(){return this._ingreso}get consecutivo(){return this._consecutivo}get tipo(){return this._tipo}get tipoForHumans(){return this._tipoForHumans}get creadoDesde(){return this._creadoDesde}get enProcesoDesde(){return this._enProcesoDesde}get cerradaDesde(){return this._cerradaDesde}get fueActualizada(){return this._fueActualizada}get nombreCompletoPaciente(){return this._nombreCompletoPaciente}get numeroDocumentoPaciente(){return this._numeroDocumentoPaciente}get nombreCreadaPor(){return this._nombreCreadaPor}get nombreProcesadaPor(){return this._nombreProcesadaPor}get nombreFinalizadaPor(){return this._nombreFinalizadaPor}set estado(s){this._estado=s,this._estadoForHumans=L(s)}set nombreCompletoPaciente(s){this._nombreCompletoPaciente=s}set numeroDocumentoPaciente(s){this._numeroDocumentoPaciente=s}set nombreCreadaPor(s){this._nombreCreadaPor=s}set creadaPor(s){this._creadaPor=s}set procesadaPor(s){this._procesadaPor=s,this._nombreProcesadaPor=s.nombre}set enProcesoDesde(s){this._enProcesoDesde=s}set cerradaPor(s){this._cerradaPor=s}set cerradaDesde(s){this._cerradaDesde=s}set nombreFinalizadaPor(s){this._nombreFinalizadaPor=s}}var B=o(3200);const v=(e,s)=>new F(e.id,e.centroId,e.title,e.content,e.priority,e.state,{id:e.createdBy,nombre:""},{id:e.inProcessBy||null,nombre:""},{id:e.closedBy||null,nombre:""},{id:e.patient},{consecutivo:e.consecutive},e.area,new Date(e.createdAt),e.inProcessAt?new Date(e.inProcessAt):null,e.closedAt?new Date(e.closedAt):null,e.wasUpdated,s.filter(t=>t.value===e.area)[0].option);var f=o(2923);let z=(()=>{class e extends f.OE{constructor(){super(...arguments),this._gestionPacientes=new d.X([]),this._gestionPacientes$=this._gestionPacientes.asObservable(),this._gestionAreas=new d.X([]),this._gestionAreas$=this._gestionAreas.asObservable()}store(t){var n=this;return(0,O.Z)(function*(){const a={title:t.titulo,content:t.contenido,priority:t.prioridad,patient:t.pacienteId,consecutive:t.consecutivoId,area:t.areaId},u=yield n._findSuggestions(!1);return yield(0,p.z)(n._http.post(`${T.FX.V1.HOSPITALIZACION.GESTION_CLINICA}`,a).pipe((0,g.U)(N=>v(N,u.areas)),(0,M.b)(N=>n._updateGestiones([N,...n._gestionPacientes.value]))))})()}fetchByPaciente(t){var n=this;return(0,O.Z)(function*(){const a=yield n._findSuggestions(!1);return yield(0,p.z)(n._http.get(`${T.FX.V1.HOSPITALIZACION.GESTION_CLINICA}/patient=${t.id}/consecutive=${t.ingreso.consecutivo}`).pipe((0,g.U)(u=>((e,s)=>{const t=[];return e.map(n=>{t.push(v(n,s))}),t})(u,a.areas)),(0,M.b)(u=>n._updateGestiones(u))))})()}fetchByAreas(t,n){var a=this;return(0,O.Z)(function*(){if(!n&&a._gestionAreas.value.length)return a._gestionAreas.value;const u=yield a._findSuggestions(!1);return yield(0,p.z)(a._http.post(`${T.FX.V1.HOSPITALIZACION.GESTION_CLINICA}/get-managements-by-area`,t).pipe((0,g.U)(N=>((e,s)=>{const t=[];return(0,B.Xo)(e,"createdAt","desc").map(a=>{t.push(((e,s)=>{const t=new F(e.id,e.centroId,e.title,e.content,e.priority,e.state,{id:e.authorId,nombre:e.authorFullName},{id:e.processorId||null,nombre:e.processorFullName},{id:e.finisherId||null,nombre:e.finisherFullName},{id:e.patientId},{consecutivo:e.consecutive},e.area,new Date(e.createdAt),e.processedAt?new Date(e.processedAt):null,e.finishedAt?new Date(e.finishedAt):null,!1,s.filter(n=>n.value===e.area)[0].option);return t.nombreCompletoPaciente=e.patientFullName,t.numeroDocumentoPaciente=e.patientDocumentNumber,t.nombreCreadaPor=e.authorFullName,t.procesadaPor.nombre=e.processorFullName,t.nombreFinalizadaPor=e.finisherFullName,t})(a,s))}),t})(N,u.areas)),(0,M.b)(N=>a._gestionAreas.next(N))))})()}updateEstado(t,n){var a=this;return(0,O.Z)(function*(){return yield(0,p.z)(a._http.get(`${T.FX.V1.HOSPITALIZACION.GESTION_CLINICA}/change-state/${t.id}/${n}`))})()}_updateGestiones(t){this._gestionPacientes.next(t)}observable(){return this._gestionPacientes$}observableAreas(){return this._gestionAreas$}_findSuggestions(t){var n=this;return(0,O.Z)(function*(){return!t&&n._suggestions?n._suggestions:yield(0,p.z)(n._http.get(`${T.FX.V1.HOSPITALIZACION.GESTION_CLINICA}/suggestions`).pipe((0,M.b)(a=>{a.managementTypes=a.managementTypes.filter(u=>17!==u.value&&28!==u.value),n._suggestions=a})))})()}}return e.\u0275fac=function(){let s;return function(n){return(s||(s=c.n5z(e)))(n||e)}}(),e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();var X=o(998),$=o(6504);let J=(()=>{class e extends f.OE{addUsuariosToArea(t){var n=this;return(0,O.Z)(function*(){return yield(0,p.z)(n._http.post(`${T.FX.V1.HOSPITALIZACION.GESTION_CLINICA}/set-users-to-area`,t))})()}removeUsuariosFromArea(t){var n=this;return(0,O.Z)(function*(){return yield(0,p.z)(n._http.post(`${T.FX.V1.HOSPITALIZACION.GESTION_CLINICA}/remove-users-to-area`,t))})()}fetchAreasUsuarioAutenticado(){var t=this;return(0,O.Z)(function*(){return t._myAreas?t._myAreas:yield(0,p.z)(t._http.get(`${T.FX.V1.HOSPITALIZACION.GESTION_CLINICA}/get-user-areas`).pipe((0,M.b)(n=>t._myAreas=n)))})()}}return e.\u0275fac=function(){let s;return function(n){return(s||(s=c.n5z(e)))(n||e)}}(),e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[m._,I.x,{provide:X.F,useClass:z},{provide:$.S,useClass:J}],imports:[A]}),e})()},7283:(P,l,o)=>{o.d(l,{x:()=>h});var C=o(5861),S=o(3200),G=o(4650),c=o(998);let h=(()=>{class A{constructor(I){this._gestiones=I}update(I,O){var T=this;return(0,C.Z)(function*(){try{const d=yield T._gestiones.updateEstado(I,O);return S.HT.right(d)}catch{return S.HT.left(!1)}})()}fetchByAreas(I,O=!1){var T=this;return(0,C.Z)(function*(){try{const d=yield T._gestiones.fetchByAreas(I,O);return S.HT.right(d)}catch{return S.HT.left(!1)}})()}observableAreas(){return this._gestiones.observableAreas()}}return A.\u0275fac=function(I){return new(I||A)(G.LFG(c.F))},A.\u0275prov=G.Yz7({token:A,factory:A.\u0275fac}),A})()},2216:(P,l,o)=>{o.d(l,{_:()=>h});var C=o(5861),S=o(3200),G=o(4650),c=o(6504);let h=(()=>{class A{constructor(I){this._areas=I}fetchAreasUsuarioAutenticado(){var I=this;return(0,C.Z)(function*(){try{const O=yield I._areas.fetchAreasUsuarioAutenticado();return S.HT.right(O)}catch{return S.HT.left(!1)}})()}}return A.\u0275fac=function(I){return new(I||A)(G.LFG(c.S))},A.\u0275prov=G.Yz7({token:A,factory:A.\u0275fac}),A})()}}]);