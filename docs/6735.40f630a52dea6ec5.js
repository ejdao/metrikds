"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6735],{6735:($,F,i)=>{i.r(F),i.d(F,{LoginPageModule:()=>K});var Z=i(6895),x=i(1390),b=i(5861),U=i(2523),u=i(4006),A=i(1192);class S extends u.cw{constructor(){super({username:new u.NI(null,[A.C1]),password:new u.NI(null,[A.C1])})}get username(){return this.get("username")}get password(){return this.get("password")}get model(){return{email:this.username.value,password:this.password.value}}}var n=i(4650),C=i(6431);class I{constructor(r){this._auth=r}execute(r){return this._auth.execute(r)}}var w=i(3905),J=i(4986),M=i(1165),L=i(4482),T=i(8421),N=i(3888),P=i(5403),O=i(9672);const E=(0,N.d)(t=>function(e=null){t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e});function z(t){throw new E(t)}var G=i(2843),Q=i(4671),j=i(2805),H=i(529);let R=(()=>{class t{constructor(e){this._http=e}execute(e){var o=this;return(0,b.Z)(function*(){return(0,w.z)(o._http.post(U.b.V1.AUTH.LOGIN,e).pipe(function Y(t,r){const{first:e,each:o,with:a=z,scheduler:c=(null!=r?r:J.z),meta:m=null}=(0,M.q)(t)?{first:t}:"number"==typeof t?{each:t}:t;if(null==e&&null==o)throw new TypeError("No timeout provided.");return(0,L.e)((v,l)=>{let h,s,g=null,f=0;const y=p=>{s=(0,O.f)(l,c,()=>{try{h.unsubscribe(),(0,T.Xf)(a({meta:m,lastValue:g,seen:f})).subscribe(l)}catch(W){l.error(W)}},p)};h=v.subscribe((0,P.x)(l,p=>{null==s||s.unsubscribe(),f++,l.next(g=p),o>0&&y(o)},void 0,void 0,()=>{null!=s&&s.closed||null==s||s.unsubscribe(),g=null})),!f&&y(null!=e?"number"==typeof e?e:+e-c.now():o)})}({each:4e3,with:()=>(0,G._)(()=>{})}),function B(t=1/0){let r;r=t&&"object"==typeof t?t:{count:t};const{count:e=1/0,delay:o,resetOnSuccess:a=!1}=r;return e<=0?Q.y:(0,L.e)((c,m)=>{let l,v=0;const h=()=>{let s=!1;l=c.subscribe((0,P.x)(m,g=>{a&&(v=0),m.next(g)},void 0,g=>{if(v++<e){const f=()=>{l?(l.unsubscribe(),l=null,h()):s=!0};if(null!=o){const y="number"==typeof o?(0,j.H)(o):(0,T.Xf)(o(g,v)),p=(0,P.x)(m,()=>{p.unsubscribe(),f()},()=>{m.complete()});y.subscribe(p)}else f()}else m.error(g)})),s&&(l.unsubscribe(),l=null,h())};h()})}(3)))})()}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(H.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),k=(()=>{class t{constructor(e){this._loginUser=e}execute(e){var o=this;return(0,b.Z)(function*(){const a=new I(o._loginUser);try{const c=yield a.execute(e);return C.HT.right(c)}catch{return C.HT.left(!1)}})()}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(R))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var D=i(5456),d=i(2879);const X=[{path:"",component:(()=>{class t{constructor(e,o,a,c){this._auth=e,this._router=o,this._toast=a,this._cd=c,this.loginForm=new S,this.showPass=!1,this._isAuthenticating=!1}clickOnAuthenticate(){var e=this;return(0,b.Z)(function*(){e.loginForm.valid&&(e._isAuthenticating=!0,e._cd.markForCheck(),(yield e._auth.execute(e.loginForm.model)).fold({right:a=>{a.token.includes("Invalid credentials")?e._toast.simpleNotification("Usuario y/o contrase\xf1a incorrectas"):(localStorage.setItem(U.I.authToken,a.token),location.reload())}}),e._isAuthenticating=!1,e._cd.markForCheck())})()}get isAuthenticating(){return this._isAuthenticating}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(k),n.Y36(x.F0),n.Y36(D.a),n.Y36(n.sBO))},t.\u0275cmp=n.Xpm({type:t,selectors:[["gcm-login"]],decls:19,vars:7,consts:[[1,"login-background-image","ion-padding",3,"fullscreen"],[1,"login-container"],[1,"login-content"],[3,"formGroup","ngSubmit"],["label","Nombre de Usuario","label-placement","floating",3,"formControl"],["label-placement","floating","label","Contrase\xf1a",3,"type","formControl"],["fill","clear",3,"click"],["color","dark","slot","end",1,"pass-eye-icon",3,"name"],["type","submit",1,"bolder",3,"disabled"]],template:function(e,o){1&e&&(n.TgZ(0,"ion-content",0)(1,"section",1)(2,"div",2)(3,"div")(4,"b"),n._uU(5,"Metrik DS"),n.qZA(),n._UZ(6,"br"),n.TgZ(7,"span"),n._uU(8,"Control de acceso"),n.qZA()(),n.TgZ(9,"form",3),n.NdJ("ngSubmit",function(){return o.clickOnAuthenticate()}),n.TgZ(10,"ion-item"),n._UZ(11,"ion-input",4),n.qZA(),n.TgZ(12,"ion-item"),n._UZ(13,"ion-input",5),n.TgZ(14,"ion-button",6),n.NdJ("click",function(){return o.showPass=!o.showPass}),n._UZ(15,"ion-icon",7),n.qZA()(),n._UZ(16,"br"),n.TgZ(17,"ion-button",8),n._uU(18," INICIAR SESI\xd3N "),n.qZA()()()()()),2&e&&(n.Q6J("fullscreen",!0),n.xp6(9),n.Q6J("formGroup",o.loginForm),n.xp6(2),n.Q6J("formControl",o.loginForm.username),n.xp6(2),n.Q6J("type",o.showPass?"text":"password")("formControl",o.loginForm.password),n.xp6(2),n.Q6J("name",o.showPass?"eye-off-outline":"eye-outline"),n.xp6(2),n.Q6J("disabled",o.isAuthenticating||!o.loginForm.valid))},dependencies:[u._Y,u.JJ,u.JL,u.oH,u.sg,d.YG,d.W2,d.gu,d.pK,d.Ie,d.j9],styles:[".login-background-image[_ngcontent-%COMP%]{--background: linear-gradient(105deg, #0aa1ae 60%, #79d5db 60%)}.login-container[_ngcontent-%COMP%]{min-height:calc(100vh - 40px);justify-content:center;align-items:center;text-align:center;display:flex}.login-content[_ngcontent-%COMP%]{text-align:center;white-space:nowrap;background-color:var(--ion-custom-background);box-shadow:#32325d40 0 2px 5px -1px,#0000004d 0 1px 3px -1px;border-radius:10px;padding:16px}.login-content[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-height:150px;max-width:260px}form[_ngcontent-%COMP%]{padding:0 10px 10px 0;text-align:center;margin:20px;border-radius:8px}.pass-eye-icon[_ngcontent-%COMP%]{color:var(--ion-text-color)!important}"],changeDetection:0}),t})()}];let V=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[x.Bz.forChild(X),x.Bz]}),t})(),K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[Z.ez,u.UX,V,d.Pc]}),t})()}}]);